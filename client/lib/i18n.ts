export type Language = "en" | "de";

export function resolveLanguageFromLocale(locale: string | null | undefined): Language {
  return locale?.toLowerCase().startsWith("de") ? "de" : "en";
}

export function getDeviceLanguage(): Language {
  try {
    const locale = Intl.DateTimeFormat().resolvedOptions().locale;
    return resolveLanguageFromLocale(locale);
  } catch {
    return "en";
  }
}

export const translations = {
  en: {
    learnJavaScript: "Learn JavaScript",

    learn: "Learn",
    progress: "Progress",
    practice: "Practice",
    settings: "Settings",

    startQuiz: "Start Quiz",
    explainTopic: "Explain Topic",
    generatingExplanation: "Generating explanation...",
    topicExplanation: "Topic Explanation",
    dueForReview: "Due for review",
    mastered: "Mastered",
    level: "Level",
    topic: "topic",
    topics: "topics",

    generatingQuiz: "Generating quiz questions...",
    unableToLoadQuiz: "Unable to Load Quiz",
    tryAgain: "Try Again",
    cancel: "Cancel",
    submitAnswer: "Submit Answer",
    nextQuestion: "Next Question",
    viewResults: "View Results",
    explanation: "Explanation",
    question: "Question",

    sessionComplete: "Session Complete!",
    excellentWork: "Excellent work! You've mastered this topic!",
    greatJob: "Great job! Keep practicing to improve!",
    goodStart: "Good start! Review the explanations and try again!",
    keepLearning: "Keep learning! Practice makes perfect!",
    questionBreakdown: "Question Breakdown",
    backToTopics: "Back to Topics",
    practiceAgain: "Practice Again",

    yourProgress: "Your Progress",
    totalQuestions: "Total Questions",
    correctAnswers: "Correct Answers",
    accuracy: "Accuracy",
    topicsMastered: "Topics Mastered",
    currentStreak: "Current Streak",
    bestStreak: "Best Streak",
    achievements: "Achievements",
    firstQuiz: "First Quiz",
    streak7Days: "7-Day Streak",
    streak30Days: "30-Day Streak",
    questions100: "100 Questions",
    jsNovice: "JS Novice",
    jsMaster: "JS Master",

    profile: "Profile",
    preferences: "Preferences",
    about: "About",
    aboutThisApp: "About This App",
    avatar: "Avatar",
    displayName: "Display Name",
    language: "Language",
    english: "English",
    german: "German",
    version: "Version",
    imprint: "Imprint",
    saveChanges: "Save Changes",
    student: "Student",
    editProfile: "Edit Profile",
    dayStreak: "day streak",
    resetProgress: "Reset Progress",
    resetProgressMessage:
      "This will delete all your progress, streaks, and achievements. This cannot be undone.",
    reset: "Reset",
    resetAllProgress: "Reset All Progress",
    error: "Error",
    failedToSaveSettings: "Failed to save settings",
    theme: "Theme",
    themeAuto: "System",
    themeLight: "Light",
    themeDark: "Dark",
    sunday: "S",
    monday: "M",
    tuesday: "T",
    wednesday: "W",
    thursday: "T",
    friday: "F",
    saturday: "S",

    topicNotFound: "Topic not found",

    errorMessage:
      "DHBW Learn encountered an unexpected issue. Tap below to get back to learning!",
    errorFallbackTitle: "Oops!",
    backToLearning: "Back to Learning",
    errorDetails: "Error Details",
    stackTrace: "Stack Trace",
    ok: "OK",
    failedToLoadExplanation: "Failed to load explanation. Please try again.",

    fundamentals: "Fundamentals",
    controlFlow: "Control Flow",
    functionsCategory: "Functions",
    objectsArrays: "Objects & Arrays",
    asyncCategory: "Async",
    advancedCategory: "Advanced",

    variables: "Variables",
    variablesDesc: "let, const declarations",
    dataTypes: "Data Types",
    dataTypesDesc: "Primitives and type checking",
    operators: "Operators",
    operatorsDesc: "Arithmetic, comparison, logical",
    conditionals: "Conditionals",
    conditionalsDesc: "if/else, ternary operator",
    loops: "Loops",
    loopsDesc: "for, while, do-while, for...of",
    switch: "Switch",
    switchDesc: "Switch statements and cases",
    declarations: "Declarations",
    declarationsDesc: "Function declarations and expressions",
    arrowFunctions: "Arrow Functions",
    arrowFunctionsDesc: "ES6 arrow function syntax",
    callbacks: "Callbacks",
    callbacksDesc: "Callback functions and patterns",
    objects: "Objects",
    objectsDesc: "Object literals and methods",
    arrays: "Arrays",
    arraysDesc: "Array methods and manipulation",
    destructuring: "Destructuring",
    destructuringDesc: "Object and array destructuring",
    promises: "Promises",
    promisesDesc: "Promise creation and chaining",
    asyncAwait: "Async/Await",
    asyncAwaitDesc: "Modern async syntax",
    errorHandling: "Error Handling",
    errorHandlingDesc: "try/catch and error management",
    closures: "Closures",
    closuresDesc: "Lexical scope and closures",
    prototypes: "Prototypes",
    prototypesDesc: "Prototype chain and inheritance",
    classes: "Classes",
    classesDesc: "ES6 class syntax",
    modules: "Modules",
    modulesDesc: "import/export and module patterns",

    mixedQuiz: "Mixed Quiz",
    mixedQuizDesc: "Random questions from all topics",
    dueTopicsQuiz: "Due Topics Quiz",
    dueTopicsQuizDesc: "Focus on topics that need review",
    quickQuiz: "Quick Quiz",
    quickQuizDesc: "5 quick questions to warm up",
    byCategoryQuiz: "By Category",
    byCategoryQuizDesc: "Pick a category to practice",
    quizModes: "Quiz Modes",
    noDueTopics: "You're all caught up!",
    noDueTopicsDesc: "No topics need review. Start a mixed quiz!",
    startReview: "Start Review",
    selectCategory: "Select Category",
  },
  de: {
    learnJavaScript: "JavaScript lernen",

    learn: "Lernen",
    progress: "Fortschritt",
    practice: "Üben",
    settings: "Einstellungen",

    startQuiz: "Quiz starten",
    explainTopic: "Thema erklären",
    generatingExplanation: "Erklärung wird generiert...",
    topicExplanation: "Themen-Erklärung",
    dueForReview: "Zur Wiederholung",
    mastered: "Gemeistert",
    level: "Level",
    topic: "Thema",
    topics: "Themen",

    generatingQuiz: "Quiz-Fragen werden generiert...",
    unableToLoadQuiz: "Quiz konnte nicht geladen werden",
    tryAgain: "Erneut versuchen",
    cancel: "Abbrechen",
    submitAnswer: "Antwort absenden",
    nextQuestion: "Nächste Frage",
    viewResults: "Ergebnisse anzeigen",
    explanation: "Erklärung",
    question: "Frage",

    sessionComplete: "Sitzung abgeschlossen!",
    excellentWork: "Ausgezeichnet! Du hast dieses Thema gemeistert!",
    greatJob: "Super gemacht! Übe weiter, um dich zu verbessern!",
    goodStart:
      "Guter Anfang! Schau dir die Erklärungen an und versuche es erneut!",
    keepLearning: "Weiter lernen! Übung macht den Meister!",
    questionBreakdown: "Fragenübersicht",
    backToTopics: "Zurück zu den Themen",
    practiceAgain: "Nochmal üben",

    yourProgress: "Dein Fortschritt",
    totalQuestions: "Gesamtfragen",
    correctAnswers: "Richtige Antworten",
    accuracy: "Genauigkeit",
    topicsMastered: "Themen gemeistert",
    currentStreak: "Aktuelle Serie",
    bestStreak: "Beste Serie",
    achievements: "Erfolge",
    firstQuiz: "Erstes Quiz",
    streak7Days: "7-Tage-Serie",
    streak30Days: "30-Tage-Serie",
    questions100: "100 Fragen",
    jsNovice: "JS Anfänger",
    jsMaster: "JS Meister",

    profile: "Profil",
    preferences: "Einstellungen",
    about: "Über",
    aboutThisApp: "Über diese App",
    avatar: "Avatar",
    displayName: "Anzeigename",
    language: "Sprache",
    english: "Englisch",
    german: "Deutsch",
    version: "Version",
    imprint: "Impressum",
    saveChanges: "Änderungen speichern",
    student: "Student",
    editProfile: "Profil bearbeiten",
    dayStreak: "Tage Serie",
    resetProgress: "Fortschritt zurücksetzen",
    resetProgressMessage:
      "Dies löscht deinen gesamten Fortschritt, Serien und Erfolge. Dies kann nicht rückgängig gemacht werden.",
    reset: "Zurücksetzen",
    resetAllProgress: "Fortschritt zurücksetzen",
    error: "Fehler",
    failedToSaveSettings: "Einstellungen konnten nicht gespeichert werden",
    theme: "Design",
    themeAuto: "System",
    themeLight: "Hell",
    themeDark: "Dunkel",
    sunday: "S",
    monday: "M",
    tuesday: "D",
    wednesday: "M",
    thursday: "D",
    friday: "F",
    saturday: "S",

    topicNotFound: "Thema nicht gefunden",

    errorMessage:
      "DHBW Lernen hatte ein unerwartetes Problem. Tippe unten, um weiterzulernen!",
    errorFallbackTitle: "Ups!",
    backToLearning: "Zurück zum Lernen",
    errorDetails: "Fehlerdetails",
    stackTrace: "Stacktrace",
    ok: "OK",
    failedToLoadExplanation:
      "Erklärung konnte nicht geladen werden. Bitte versuche es erneut.",

    fundamentals: "Grundlagen",
    controlFlow: "Kontrollfluss",
    functionsCategory: "Funktionen",
    objectsArrays: "Objekte & Arrays",
    asyncCategory: "Async",
    advancedCategory: "Fortgeschritten",

    variables: "Variablen",
    variablesDesc: "let, const Deklarationen",
    dataTypes: "Datentypen",
    dataTypesDesc: "Primitive und Typprüfung",
    operators: "Operatoren",
    operatorsDesc: "Arithmetisch, Vergleich, Logisch",
    conditionals: "Bedingungen",
    conditionalsDesc: "if/else, Ternärer Operator",
    loops: "Schleifen",
    loopsDesc: "for, while, do-while, for...of",
    switch: "Switch",
    switchDesc: "Switch-Anweisungen und Fälle",
    declarations: "Deklarationen",
    declarationsDesc: "Funktionsdeklarationen und -ausdrücke",
    arrowFunctions: "Pfeilfunktionen",
    arrowFunctionsDesc: "ES6 Pfeilfunktions-Syntax",
    callbacks: "Callbacks",
    callbacksDesc: "Callback-Funktionen und Muster",
    objects: "Objekte",
    objectsDesc: "Objektliterale und Methoden",
    arrays: "Arrays",
    arraysDesc: "Array-Methoden und Manipulation",
    destructuring: "Destrukturierung",
    destructuringDesc: "Objekt- und Array-Destrukturierung",
    promises: "Promises",
    promisesDesc: "Promise-Erstellung und Verkettung",
    asyncAwait: "Async/Await",
    asyncAwaitDesc: "Moderne Async-Syntax",
    errorHandling: "Fehlerbehandlung",
    errorHandlingDesc: "try/catch und Fehlermanagement",
    closures: "Closures",
    closuresDesc: "Lexikalischer Gültigkeitsbereich und Closures",
    prototypes: "Prototypen",
    prototypesDesc: "Prototypen-Kette und Vererbung",
    classes: "Klassen",
    classesDesc: "ES6 Klassen-Syntax",
    modules: "Module",
    modulesDesc: "import/export und Modul-Muster",

    mixedQuiz: "Gemischtes Quiz",
    mixedQuizDesc: "Zufällige Fragen aus allen Themen",
    dueTopicsQuiz: "Fällige Themen",
    dueTopicsQuizDesc: "Themen zur Wiederholung",
    quickQuiz: "Schnelles Quiz",
    quickQuizDesc: "5 schnelle Fragen zum Aufwärmen",
    byCategoryQuiz: "Nach Kategorie",
    byCategoryQuizDesc: "Wähle eine Kategorie zum Üben",
    quizModes: "Quiz-Modi",
    noDueTopics: "Alles erledigt!",
    noDueTopicsDesc:
      "Keine Themen zur Wiederholung. Starte ein gemischtes Quiz!",
    startReview: "Wiederholung starten",
    selectCategory: "Kategorie wählen",
  },
} as const;

export type TranslationKey = keyof typeof translations.en;
